<!DOCTYPE html><html><head><title>vc | Grayscales</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/vc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/vc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-11"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-star" data-show-count="false" data-size="large" href="https://github.com/CompuVisual2021/vc/">Star</a><br><br><a class="watermark-0-0-10" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><h2 id="grayscales" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Grayscales</h2><p>Adapted from <a href="https://p5js.org/es/examples/image-brightness.html">here</a>.</p><div class="tabs-0-0-18"><script id="NWaCKUgJTT">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("NWaCKUgJTT", "6jzvkXXQW/pnjrYP6mla2g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Image Grayscale" data-tab-id="Image Grayscale" data-tab-icon="visibility"><iframe id="imgLuma" class="p5-0-0-17 center" style="width: 790px; height: 475px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js></script>
            <script src=/vc/docs/sketches/workshops/imaging/imgLuma.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>Original(supIzq), luma(supDer), average(infIzq), weighted(infDer).</p></div><div class="tab" data-tab-title="Code" data-tab-id="Code" data-tab-icon="code"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>imgLuma.js</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="let img; // Declarar variable 'img'." id="code1-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> img<span class="token punctuation">;</span> <span class="token comment">// Declarar variable 'img'.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgPath = &quot;/vc/docs/sketches/Fire_breathing_2_Luc_Viatour.jpg&quot;;//Pokémon.jpg&quot;;" id="code1-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgPath <span class="token operator">=</span> <span class="token string">"/vc/docs/sketches/Fire_breathing_2_Luc_Viatour.jpg"</span><span class="token punctuation">;</span><span class="token comment">//Pokémon.jpg";</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgWidth = 780;" id="code1-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgWidth <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgHeight = 439;" id="code1-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgHeight <span class="token operator">=</span> <span class="token number">439</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function preload() {" id="code1-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg = loadImage(imgPath); // Cargar la imagen" id="code1-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cargar la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg = loadImage(imgPath); // Cargar la imagen" id="code1-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cargar la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function setup() {" id="code1-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  createCanvas(imgWidth, imgHeight + 15);" id="code1-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">createCanvas</span><span class="token punctuation">(</span>imgWidth<span class="token punctuation">,</span> imgHeight <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  pixelDensity(1);" id="code1-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">pixelDensity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, 0, 0, imgWidth / 2, imgHeight / 2);" id="code1-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  lumaGray(dstimg,srcimg);" id="code1-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">lumaGray</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span>srcimg<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, width / 2, 0, imgWidth / 2, imgHeight / 2);" id="code1-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  averageGray(dstimg,srcimg);" id="code1-l17"><span class="lineCounter-0-0-4 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">averageGray</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span>srcimg<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, 0, imgHeight / 2, imgWidth / 2, imgHeight / 2);" id="code1-l18"><span class="lineCounter-0-0-4 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  weightedGray(dstimg,srcimg);" id="code1-l19"><span class="lineCounter-0-0-4 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">weightedGray</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span>srcimg<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, width / 2, imgHeight / 2, imgWidth / 2, imgHeight / 2);" id="code1-l20"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l21"><span class="lineCounter-0-0-4 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l22"><span class="lineCounter-0-0-4 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function lumaGray(dstimg,srcimg) {" id="code1-l23"><span class="lineCounter-0-0-4 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">lumaGray</span><span class="token punctuation">(</span><span class="token parameter">dstimg<span class="token punctuation">,</span>srcimg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg.loadPixels();" id="code1-l24"><span class="lineCounter-0-0-4 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.loadPixels();" id="code1-l25"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  for (let x = 0; x < srcimg.width; x++) {" id="code1-l26"><span class="lineCounter-0-0-4 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let y = 0; y < srcimg.height; y++) {" id="code1-l27"><span class="lineCounter-0-0-4 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Calculate the 1D location from a 2D grid" id="code1-l28"><span class="lineCounter-0-0-4 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let loc = (x + y * srcimg.width) * 4;" id="code1-l29"><span class="lineCounter-0-0-4 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Get the R,G,B values from image" id="code1-l30"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let r, g, b;" id="code1-l31"><span class="lineCounter-0-0-4 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = srcimg.pixels[loc];" id="code1-l32"><span class="lineCounter-0-0-4 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = srcimg.pixels[loc + 1];" id="code1-l33"><span class="lineCounter-0-0-4 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = srcimg.pixels[loc + 2];" id="code1-l34"><span class="lineCounter-0-0-4 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //Constrain RGB to make sure they are within 0-255 color range" id="code1-l35"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = constrain(r, 0, 255);" id="code1-l36"><span class="lineCounter-0-0-4 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = constrain(g, 0, 255);" id="code1-l37"><span class="lineCounter-0-0-4 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = constrain(b, 0, 255);" id="code1-l38"><span class="lineCounter-0-0-4 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Make a new color and set pixel in the window" id="code1-l39"><span class="lineCounter-0-0-4 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let pixloc = (y * srcimg.width + x) * 4;" id="code1-l40"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let gray = 0.2126 * r + 0.7152 * g + 0.0722 * b;" id="code1-l41"><span class="lineCounter-0-0-4 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> gray <span class="token operator">=</span> <span class="token number">0.2126</span> <span class="token operator">*</span> r <span class="token operator">+</span> <span class="token number">0.7152</span> <span class="token operator">*</span> g <span class="token operator">+</span> <span class="token number">0.0722</span> <span class="token operator">*</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc] = gray;" id="code1-l42"><span class="lineCounter-0-0-4 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 1] = gray;" id="code1-l43"><span class="lineCounter-0-0-4 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 2] = gray;" id="code1-l44"><span class="lineCounter-0-0-4 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 3] = 255; // Always have to set alpha" id="code1-l45"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l46"><span class="lineCounter-0-0-4 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code1-l47"><span class="lineCounter-0-0-4 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.updatePixels();" id="code1-l48"><span class="lineCounter-0-0-4 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l49"><span class="lineCounter-0-0-4 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l50"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function averageGray(dstimg,srcimg) {" id="code1-l51"><span class="lineCounter-0-0-4 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">averageGray</span><span class="token punctuation">(</span><span class="token parameter">dstimg<span class="token punctuation">,</span>srcimg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg.loadPixels();" id="code1-l52"><span class="lineCounter-0-0-4 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.loadPixels();" id="code1-l53"><span class="lineCounter-0-0-4 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  for (let x = 0; x < srcimg.width; x++) {" id="code1-l54"><span class="lineCounter-0-0-4 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let y = 0; y < srcimg.height; y++) {" id="code1-l55"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Calculate the 1D location from a 2D grid" id="code1-l56"><span class="lineCounter-0-0-4 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let loc = (x + y * srcimg.width) * 4;" id="code1-l57"><span class="lineCounter-0-0-4 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Get the R,G,B values from image" id="code1-l58"><span class="lineCounter-0-0-4 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let r, g, b;" id="code1-l59"><span class="lineCounter-0-0-4 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = srcimg.pixels[loc];" id="code1-l60"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = srcimg.pixels[loc + 1];" id="code1-l61"><span class="lineCounter-0-0-4 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = srcimg.pixels[loc + 2];" id="code1-l62"><span class="lineCounter-0-0-4 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //Constrain RGB to make sure they are within 0-255 color range" id="code1-l63"><span class="lineCounter-0-0-4 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = constrain(r, 0, 255);" id="code1-l64"><span class="lineCounter-0-0-4 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = constrain(g, 0, 255);" id="code1-l65"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = constrain(b, 0, 255);" id="code1-l66"><span class="lineCounter-0-0-4 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Make a new color and set pixel in the window" id="code1-l67"><span class="lineCounter-0-0-4 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let pixloc = (y * srcimg.width + x) * 4;" id="code1-l68"><span class="lineCounter-0-0-4 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let gray = (r + g + b) / 3;" id="code1-l69"><span class="lineCounter-0-0-4 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> gray <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">+</span> g <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc] = gray;" id="code1-l70"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 1] = gray;" id="code1-l71"><span class="lineCounter-0-0-4 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 2] = gray;" id="code1-l72"><span class="lineCounter-0-0-4 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 3] = 255; // Always have to set alpha" id="code1-l73"><span class="lineCounter-0-0-4 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l74"><span class="lineCounter-0-0-4 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code1-l75"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.updatePixels();" id="code1-l76"><span class="lineCounter-0-0-4 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l77"><span class="lineCounter-0-0-4 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code1-l78"><span class="lineCounter-0-0-4 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function weightedGray(dstimg,srcimg) {" id="code1-l79"><span class="lineCounter-0-0-4 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">weightedGray</span><span class="token punctuation">(</span><span class="token parameter">dstimg<span class="token punctuation">,</span>srcimg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg.loadPixels();" id="code1-l80"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.loadPixels();" id="code1-l81"><span class="lineCounter-0-0-4 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  for (let x = 0; x < srcimg.width; x++) {" id="code1-l82"><span class="lineCounter-0-0-4 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let y = 0; y < srcimg.height; y++) {" id="code1-l83"><span class="lineCounter-0-0-4 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> srcimg<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Calculate the 1D location from a 2D grid" id="code1-l84"><span class="lineCounter-0-0-4 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let loc = (x + y * srcimg.width) * 4;" id="code1-l85"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Get the R,G,B values from image" id="code1-l86"><span class="lineCounter-0-0-4 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let r, g, b;" id="code1-l87"><span class="lineCounter-0-0-4 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = srcimg.pixels[loc];" id="code1-l88"><span class="lineCounter-0-0-4 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = srcimg.pixels[loc + 1];" id="code1-l89"><span class="lineCounter-0-0-4 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = srcimg.pixels[loc + 2];" id="code1-l90"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //Constrain RGB to make sure they are within 0-255 color range" id="code1-l91"><span class="lineCounter-0-0-4 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      r = constrain(r, 0, 255);" id="code1-l92"><span class="lineCounter-0-0-4 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      r <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      g = constrain(g, 0, 255);" id="code1-l93"><span class="lineCounter-0-0-4 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      g <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      b = constrain(b, 0, 255);" id="code1-l94"><span class="lineCounter-0-0-4 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      b <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // Make a new color and set pixel in the window" id="code1-l95"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let pixloc = (y * srcimg.width + x) * 4;" id="code1-l96"><span class="lineCounter-0-0-4 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> srcimg<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let gray = r * 0.299 + g * 0.587 + b * 0.114;" id="code1-l97"><span class="lineCounter-0-0-4 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> gray <span class="token operator">=</span> r <span class="token operator">*</span> <span class="token number">0.299</span> <span class="token operator">+</span> g <span class="token operator">*</span> <span class="token number">0.587</span> <span class="token operator">+</span> b <span class="token operator">*</span> <span class="token number">0.114</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc] = gray;" id="code1-l98"><span class="lineCounter-0-0-4 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 1] = gray;" id="code1-l99"><span class="lineCounter-0-0-4 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 2] = gray;" id="code1-l100"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[pixloc + 3] = 255; // Always have to set alpha" id="code1-l101"><span class="lineCounter-0-0-4 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code1-l102"><span class="lineCounter-0-0-4 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code1-l103"><span class="lineCounter-0-0-4 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.updatePixels();" id="code1-l104"><span class="lineCounter-0-0-4 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code1-l105"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div><div class="tab" data-tab-title="document" data-tab-id="document" data-tab-icon="description"><blockquote><p>Para cambiar la imagen a tonalidades de gris se tiene en cuenta la eficacia luminosa, esta es la medida de que tan bien una fuente de luz produce luz visible por el ojo humano para esto se crea una función de luminosidad que describe la sensibilidad promedio del ojo humano al brillo, esta se basa en juicios subjetivos que tienen que ver con cómo percibimos el color a través de los bastones, por lo tanto podríamos decir que cada ecuación que usamos es una función de luminosidad con diferentes parámetros. </p><p>Luma weighted gray = <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∗</mo><mn>0.299</mn><mo>+</mo><mi>G</mi><mo>∗</mo><mn>0.587</mn><mo>+</mo><mi>B</mi><mo>∗</mo><mn>0.114</mn></mrow><annotation encoding="application/x-tex">{R * 0.299 + G * 0.587 + B * 0.114}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">9</span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">8</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mord">4</span></span></span></span></span></span> from matlab</p><p>Esta se basa en la función rgb2gray de matlab Estos son los mismos pesos utilizados por la función rgb2ntsc para calcular el componente Y .
Los coeficientes utilizados para calcular los valores de escala de grises en rgb2gray son idénticos a los utilizados para calcular la luminancia (E'y) en REC. UIT-R BT. 601-7 después de redondearse a 3 posiciones decimales.
Rec. UIT-R BT. 601-7 calcula E'y utilizando la siguiente fórmula:
<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∗</mo><mn>0.299</mn><mo>+</mo><mi>G</mi><mo>∗</mo><mn>0.587</mn><mo>+</mo><mi>B</mi><mo>∗</mo><mn>0.114</mn></mrow><annotation encoding="application/x-tex">{R * 0.299 + G * 0.587 + B * 0.114}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">9</span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">8</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mord">4</span></span></span></span></span></span></p><p>Luma Gray = <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.2126</mn><mo>∗</mo><mi>R</mi><mo>+</mo><mn>0.7152</mn><mo>∗</mo><mi>G</mi><mo>+</mo><mn>0.0722</mn><mo>∗</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">{0.2126 * R + 0.7152 * G + 0.0722 * B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">1</span><span class="mord">2</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span><span class="mord">1</span><span class="mord">5</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">7</span><span class="mord">2</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></span></span></p><p>Esta es la misma fórmula que se utiliza en la conversión de Rec. 709 RGB a YCbCr para encontrar el componente Y, esta solo puede ser usada en espacios RBG </p><p>Average gray = <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo>+</mo><mi>G</mi><mo>+</mo><mi>B</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">{(R + G + B) / 3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">3</span></span></span></span></span></span></p><p>Este se basa en el promedio de todos los canales de color RGB es el menos eficiente de los 3 ya que se pierde definicion en la imagen </p></blockquote></div></div><h2 id="kernel-mask" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Kernel Mask</h2><p>Adapted from <a href="https://idmnyu.github.io/p5.js-image/index.html">here</a>;</p><div class="tabs-0-0-18"><script id="oobREvNGMG">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("oobREvNGMG", "6jzvkXXQW/pnjrYP6mla2g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Kernel Mask" data-tab-id="Kernel Mask" data-tab-icon="visibility"><iframe id="imgKernel" class="p5-0-0-17 center" style="width: 790px; height: 475px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js></script>
            <script src=/vc/docs/sketches/workshops/imaging/imgKernel.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>Original(supIzq), edges original(supDer), edges soft(infIzq), edges grayscale(infDer).</p></div><div class="tab" data-tab-title="Code" data-tab-id="Code" data-tab-icon="code"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>imgKernel.js</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="//https://idmnyu.github.io/p5.js-image/index.html" id="code2-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//https://idmnyu.github.io/p5.js-image/index.html</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let srcimg, dstimg;" id="code2-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgPath = &quot;/vc/docs/sketches/Pokémon.jpg&quot;;//lenna.png&quot;;budapest.jpg&quot;;" id="code2-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgPath <span class="token operator">=</span> <span class="token string">"/vc/docs/sketches/Pokémon.jpg"</span><span class="token punctuation">;</span><span class="token comment">//lenna.png";budapest.jpg";</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgWidth = 780;" id="code2-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgWidth <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="let imgHeight = 439;" id="code2-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">let</span> imgHeight <span class="token operator">=</span> <span class="token number">439</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var blur = [" id="code2-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> blur <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1, 1, 1]," id="code2-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1, 1, 1]," id="code2-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1, 1, 1]," id="code2-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="// Y-Direction Kernel" id="code2-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// Y-Direction Kernel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var edges0 = [" id="code2-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> edges0 <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, -2, -1]," id="code2-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [0, 0, 0]," id="code2-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1, 2, 1]," id="code2-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l17"><span class="lineCounter-0-0-4 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="// X-Direction Kernel" id="code2-l18"><span class="lineCounter-0-0-4 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// X-Direction Kernel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var edges1 = [" id="code2-l19"><span class="lineCounter-0-0-4 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> edges1 <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, 0, 1]," id="code2-l20"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-2, 0, 2]," id="code2-l21"><span class="lineCounter-0-0-4 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, 0, 1]," id="code2-l22"><span class="lineCounter-0-0-4 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l23"><span class="lineCounter-0-0-4 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var edges2 = [" id="code2-l24"><span class="lineCounter-0-0-4 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> edges2 <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, -1, -1]," id="code2-l25"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, 9, -1]," id="code2-l26"><span class="lineCounter-0-0-4 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, -1, -1]," id="code2-l27"><span class="lineCounter-0-0-4 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l28"><span class="lineCounter-0-0-4 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var boxBlur = [" id="code2-l29"><span class="lineCounter-0-0-4 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> boxBlur <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1 / 9, 1 / 9, 1 / 9]," id="code2-l30"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1 / 9, 1 / 9, 1 / 9]," id="code2-l31"><span class="lineCounter-0-0-4 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [1 / 9, 1 / 9, 1 / 9]," id="code2-l32"><span class="lineCounter-0-0-4 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l33"><span class="lineCounter-0-0-4 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var edges3 = [" id="code2-l34"><span class="lineCounter-0-0-4 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> edges3 <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, -1, -1]," id="code2-l35"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, 8, -1]," id="code2-l36"><span class="lineCounter-0-0-4 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, -1, -1]," id="code2-l37"><span class="lineCounter-0-0-4 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l38"><span class="lineCounter-0-0-4 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var sharpen = [" id="code2-l39"><span class="lineCounter-0-0-4 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> sharpen <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [0, -1, 0]," id="code2-l40"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [-1, 5, -1]," id="code2-l41"><span class="lineCounter-0-0-4 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  [0, -1, 0]," id="code2-l42"><span class="lineCounter-0-0-4 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="];" id="code2-l43"><span class="lineCounter-0-0-4 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l44"><span class="lineCounter-0-0-4 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function preload() {" id="code2-l45"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg = loadImage(imgPath);" id="code2-l46"><span class="lineCounter-0-0-4 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg = loadImage(imgPath);" id="code2-l47"><span class="lineCounter-0-0-4 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code2-l48"><span class="lineCounter-0-0-4 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l49"><span class="lineCounter-0-0-4 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function setup() {" id="code2-l50"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  createCanvas(imgWidth, imgHeight);" id="code2-l51"><span class="lineCounter-0-0-4 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">createCanvas</span><span class="token punctuation">(</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  pixelDensity(1);" id="code2-l52"><span class="lineCounter-0-0-4 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">pixelDensity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, 0, 0, imgWidth / 2, imgHeight / 2);" id="code2-l53"><span class="lineCounter-0-0-4 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  kernel1(srcimg, dstimg, edges1);" id="code2-l54"><span class="lineCounter-0-0-4 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">kernel1</span><span class="token punctuation">(</span>srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">,</span> edges1<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, width / 2, 0, imgWidth / 2, imgHeight / 2);" id="code2-l55"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  kernel1(srcimg, dstimg, edges2);" id="code2-l56"><span class="lineCounter-0-0-4 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">kernel1</span><span class="token punctuation">(</span>srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">,</span> edges2<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, 0, height / 2, imgWidth / 2, imgHeight / 2);" id="code2-l57"><span class="lineCounter-0-0-4 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  kernel2(srcimg, dstimg, edges1);" id="code2-l58"><span class="lineCounter-0-0-4 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">kernel2</span><span class="token punctuation">(</span>srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">,</span> edges1<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  image(dstimg, width / 2, height / 2, imgWidth / 2, imgHeight / 2);" id="code2-l59"><span class="lineCounter-0-0-4 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token function">image</span><span class="token punctuation">(</span>dstimg<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> imgHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code2-l60"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l61"><span class="lineCounter-0-0-4 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function kernel1(srcimg, dstimg, k1) {" id="code2-l62"><span class="lineCounter-0-0-4 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">kernel1</span><span class="token punctuation">(</span><span class="token parameter">srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">,</span> k1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg.loadPixels();" id="code2-l63"><span class="lineCounter-0-0-4 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.loadPixels();" id="code2-l64"><span class="lineCounter-0-0-4 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  var w = srcimg.width;" id="code2-l65"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">var</span> w <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  var h = srcimg.height;" id="code2-l66"><span class="lineCounter-0-0-4 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">var</span> h <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>height<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  for (var x = 0; x < w; x++) {" id="code2-l67"><span class="lineCounter-0-0-4 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (var y = 0; y < h; y++) {" id="code2-l68"><span class="lineCounter-0-0-4 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // INDEX POSITION IN PIXEL LIST" id="code2-l69"><span class="lineCounter-0-0-4 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// INDEX POSITION IN PIXEL LIST</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ul = (((x - 1 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER LEFT" id="code2-l70"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ul <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var uc = (((x - 0 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER MID" id="code2-l71"><span class="lineCounter-0-0-4 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> uc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER MID</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ur = (((x + 1 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER RIGHT" id="code2-l72"><span class="lineCounter-0-0-4 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ur <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ml = (((x - 1 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the LEFT" id="code2-l73"><span class="lineCounter-0-0-4 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ml <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var mc = (((x - 0 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the CENTER PIXEL" id="code2-l74"><span class="lineCounter-0-0-4 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> mc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the CENTER PIXEL</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var mr = (((x + 1 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the RIGHT" id="code2-l75"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> mr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ll = (((x - 1 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER LEFT" id="code2-l76"><span class="lineCounter-0-0-4 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ll <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var lc = (((x - 0 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER MID" id="code2-l77"><span class="lineCounter-0-0-4 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> lc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER MID</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var lr = (((x + 1 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER RIGHT" id="code2-l78"><span class="lineCounter-0-0-4 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> lr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // red channel only" id="code2-l79"><span class="lineCounter-0-0-4 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// red channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul] * k1[0][0]; // upper left" id="code2-l80"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc] * k1[0][1]; // upper mid" id="code2-l81"><span class="lineCounter-0-0-4 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur] * k1[0][2]; // upper right" id="code2-l82"><span class="lineCounter-0-0-4 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml] * k1[1][0]; // left" id="code2-l83"><span class="lineCounter-0-0-4 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc] * k1[1][1]; // center pixel" id="code2-l84"><span class="lineCounter-0-0-4 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr] * k1[1][2]; // right" id="code2-l85"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll] * k1[2][0]; // lower left" id="code2-l86"><span class="lineCounter-0-0-4 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc] * k1[2][1]; // lower mid" id="code2-l87"><span class="lineCounter-0-0-4 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr] * k1[2][2]; // lower right" id="code2-l88"><span class="lineCounter-0-0-4 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r0 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l89"><span class="lineCounter-0-0-4 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r0 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // green channel only" id="code2-l90"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// green channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul + 1] * k1[0][0]; // upper left" id="code2-l91"><span class="lineCounter-0-0-4 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc + 1] * k1[0][1]; // upper mid" id="code2-l92"><span class="lineCounter-0-0-4 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur + 1] * k1[0][2]; // upper right" id="code2-l93"><span class="lineCounter-0-0-4 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml + 1] * k1[1][0]; // left" id="code2-l94"><span class="lineCounter-0-0-4 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc + 1] * k1[1][1]; // center pixel" id="code2-l95"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr + 1] * k1[1][2]; // right" id="code2-l96"><span class="lineCounter-0-0-4 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll + 1] * k1[2][0]; // lower left" id="code2-l97"><span class="lineCounter-0-0-4 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc + 1] * k1[2][1]; // lower mid" id="code2-l98"><span class="lineCounter-0-0-4 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr + 1] * k1[2][2]; // lower right" id="code2-l99"><span class="lineCounter-0-0-4 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r1 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l100"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r1 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // blue channel only" id="code2-l101"><span class="lineCounter-0-0-4 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// blue channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul + 2] * k1[0][0]; // upper left" id="code2-l102"><span class="lineCounter-0-0-4 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc + 2] * k1[0][1]; // upper mid" id="code2-l103"><span class="lineCounter-0-0-4 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur + 2] * k1[0][2]; // upper right" id="code2-l104"><span class="lineCounter-0-0-4 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml + 2] * k1[1][0]; // left" id="code2-l105"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc + 2] * k1[1][1]; // center pixel" id="code2-l106"><span class="lineCounter-0-0-4 -codedoc-line-counter">106<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr + 2] * k1[1][2]; // right" id="code2-l107"><span class="lineCounter-0-0-4 -codedoc-line-counter">107<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll + 2] * k1[2][0]; // lower left" id="code2-l108"><span class="lineCounter-0-0-4 -codedoc-line-counter">108<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc + 2] * k1[2][1]; // lower mid" id="code2-l109"><span class="lineCounter-0-0-4 -codedoc-line-counter">109<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr + 2] * k1[2][2]; // lower right" id="code2-l110"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">110<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r2 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l111"><span class="lineCounter-0-0-4 -codedoc-line-counter">111<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r2 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l112"><span class="lineCounter-0-0-4 -codedoc-line-counter">112<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // constrein 0 to 255" id="code2-l113"><span class="lineCounter-0-0-4 -codedoc-line-counter">113<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// constrein 0 to 255</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultR = constrain(r0, 0, 255);" id="code2-l114"><span class="lineCounter-0-0-4 -codedoc-line-counter">114<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultR <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultG = constrain(r1, 0, 255);" id="code2-l115"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">115<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultG <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultB = constrain(r2, 0, 255);" id="code2-l116"><span class="lineCounter-0-0-4 -codedoc-line-counter">116<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultB <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // write pixels into destination image:" id="code2-l117"><span class="lineCounter-0-0-4 -codedoc-line-counter">117<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// write pixels into destination image:</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc] = resultR;" id="code2-l118"><span class="lineCounter-0-0-4 -codedoc-line-counter">118<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc<span class="token punctuation">]</span> <span class="token operator">=</span> resultR<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 1] = resultG;" id="code2-l119"><span class="lineCounter-0-0-4 -codedoc-line-counter">119<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> resultG<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 2] = resultB;" id="code2-l120"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">120<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> resultB<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 3] = 255;" id="code2-l121"><span class="lineCounter-0-0-4 -codedoc-line-counter">121<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code2-l122"><span class="lineCounter-0-0-4 -codedoc-line-counter">122<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code2-l123"><span class="lineCounter-0-0-4 -codedoc-line-counter">123<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  // update and display the pixel buffer" id="code2-l124"><span class="lineCounter-0-0-4 -codedoc-line-counter">124<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// update and display the pixel buffer</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.updatePixels();" id="code2-l125"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">125<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  //image(dstimg, 0, 0, dstimg.width, dstimg.height);" id="code2-l126"><span class="lineCounter-0-0-4 -codedoc-line-counter">126<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">//image(dstimg, 0, 0, dstimg.width, dstimg.height);</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code2-l127"><span class="lineCounter-0-0-4 -codedoc-line-counter">127<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l128"><span class="lineCounter-0-0-4 -codedoc-line-counter">128<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="function kernel2(srcimg, dstimg, k1) {" id="code2-l129"><span class="lineCounter-0-0-4 -codedoc-line-counter">129<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">function</span> <span class="token function">kernel2</span><span class="token punctuation">(</span><span class="token parameter">srcimg<span class="token punctuation">,</span> dstimg<span class="token punctuation">,</span> k1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  srcimg.loadPixels();" id="code2-l130"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">130<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  srcimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.loadPixels();" id="code2-l131"><span class="lineCounter-0-0-4 -codedoc-line-counter">131<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  var w = srcimg.width;" id="code2-l132"><span class="lineCounter-0-0-4 -codedoc-line-counter">132<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">var</span> w <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>width<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  var h = srcimg.height;" id="code2-l133"><span class="lineCounter-0-0-4 -codedoc-line-counter">133<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">var</span> h <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>height<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  for (var x = 0; x < w; x++) {" id="code2-l134"><span class="lineCounter-0-0-4 -codedoc-line-counter">134<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (var y = 0; y < h; y++) {" id="code2-l135"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">135<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // INDEX POSITION IN PIXEL LIST" id="code2-l136"><span class="lineCounter-0-0-4 -codedoc-line-counter">136<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// INDEX POSITION IN PIXEL LIST</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ul = (((x - 1 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER LEFT" id="code2-l137"><span class="lineCounter-0-0-4 -codedoc-line-counter">137<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ul <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var uc = (((x - 0 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER MID" id="code2-l138"><span class="lineCounter-0-0-4 -codedoc-line-counter">138<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> uc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER MID</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ur = (((x + 1 + w) % w) + w * ((y - 1 + h) % h)) * 4; // location of the UPPER RIGHT" id="code2-l139"><span class="lineCounter-0-0-4 -codedoc-line-counter">139<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ur <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the UPPER RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ml = (((x - 1 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the LEFT" id="code2-l140"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">140<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ml <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var mc = (((x - 0 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the CENTER PIXEL" id="code2-l141"><span class="lineCounter-0-0-4 -codedoc-line-counter">141<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> mc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the CENTER PIXEL</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var mr = (((x + 1 + w) % w) + w * ((y + 0 + h) % h)) * 4; // location of the RIGHT" id="code2-l142"><span class="lineCounter-0-0-4 -codedoc-line-counter">142<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> mr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var ll = (((x - 1 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER LEFT" id="code2-l143"><span class="lineCounter-0-0-4 -codedoc-line-counter">143<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> ll <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER LEFT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var lc = (((x - 0 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER MID" id="code2-l144"><span class="lineCounter-0-0-4 -codedoc-line-counter">144<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> lc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">0</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER MID</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var lr = (((x + 1 + w) % w) + w * ((y + 1 + h) % h)) * 4; // location of the LOWER RIGHT" id="code2-l145"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">145<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> lr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">%</span> w<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> h<span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// location of the LOWER RIGHT</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // red channel only" id="code2-l146"><span class="lineCounter-0-0-4 -codedoc-line-counter">146<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// red channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul] * k1[0][0]; // upper left" id="code2-l147"><span class="lineCounter-0-0-4 -codedoc-line-counter">147<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc] * k1[0][1]; // upper mid" id="code2-l148"><span class="lineCounter-0-0-4 -codedoc-line-counter">148<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur] * k1[0][2]; // upper right" id="code2-l149"><span class="lineCounter-0-0-4 -codedoc-line-counter">149<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml] * k1[1][0]; // left" id="code2-l150"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">150<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc] * k1[1][1]; // center pixel" id="code2-l151"><span class="lineCounter-0-0-4 -codedoc-line-counter">151<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr] * k1[1][2]; // right" id="code2-l152"><span class="lineCounter-0-0-4 -codedoc-line-counter">152<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll] * k1[2][0]; // lower left" id="code2-l153"><span class="lineCounter-0-0-4 -codedoc-line-counter">153<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc] * k1[2][1]; // lower mid" id="code2-l154"><span class="lineCounter-0-0-4 -codedoc-line-counter">154<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr] * k1[2][2]; // lower right" id="code2-l155"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">155<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr<span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r0 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l156"><span class="lineCounter-0-0-4 -codedoc-line-counter">156<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r0 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // green channel only" id="code2-l157"><span class="lineCounter-0-0-4 -codedoc-line-counter">157<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// green channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul + 1] * k1[0][0]; // upper left" id="code2-l158"><span class="lineCounter-0-0-4 -codedoc-line-counter">158<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc + 1] * k1[0][1]; // upper mid" id="code2-l159"><span class="lineCounter-0-0-4 -codedoc-line-counter">159<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur + 1] * k1[0][2]; // upper right" id="code2-l160"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">160<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml + 1] * k1[1][0]; // left" id="code2-l161"><span class="lineCounter-0-0-4 -codedoc-line-counter">161<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc + 1] * k1[1][1]; // center pixel" id="code2-l162"><span class="lineCounter-0-0-4 -codedoc-line-counter">162<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr + 1] * k1[1][2]; // right" id="code2-l163"><span class="lineCounter-0-0-4 -codedoc-line-counter">163<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll + 1] * k1[2][0]; // lower left" id="code2-l164"><span class="lineCounter-0-0-4 -codedoc-line-counter">164<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc + 1] * k1[2][1]; // lower mid" id="code2-l165"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">165<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr + 1] * k1[2][2]; // lower right" id="code2-l166"><span class="lineCounter-0-0-4 -codedoc-line-counter">166<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r1 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l167"><span class="lineCounter-0-0-4 -codedoc-line-counter">167<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r1 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // blue channel only" id="code2-l168"><span class="lineCounter-0-0-4 -codedoc-line-counter">168<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// blue channel only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p0 = srcimg.pixels[ul + 2] * k1[0][0]; // upper left" id="code2-l169"><span class="lineCounter-0-0-4 -codedoc-line-counter">169<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p0 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ul <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p1 = srcimg.pixels[uc + 2] * k1[0][1]; // upper mid" id="code2-l170"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">170<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p1 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>uc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p2 = srcimg.pixels[ur + 2] * k1[0][2]; // upper right" id="code2-l171"><span class="lineCounter-0-0-4 -codedoc-line-counter">171<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p2 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ur <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// upper right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p3 = srcimg.pixels[ml + 2] * k1[1][0]; // left" id="code2-l172"><span class="lineCounter-0-0-4 -codedoc-line-counter">172<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p3 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ml <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p4 = srcimg.pixels[mc + 2] * k1[1][1]; // center pixel" id="code2-l173"><span class="lineCounter-0-0-4 -codedoc-line-counter">173<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p4 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// center pixel</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p5 = srcimg.pixels[mr + 2] * k1[1][2]; // right" id="code2-l174"><span class="lineCounter-0-0-4 -codedoc-line-counter">174<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p5 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p6 = srcimg.pixels[ll + 2] * k1[2][0]; // lower left" id="code2-l175"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">175<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p6 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>ll <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower left</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p7 = srcimg.pixels[lc + 2] * k1[2][1]; // lower mid" id="code2-l176"><span class="lineCounter-0-0-4 -codedoc-line-counter">176<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p7 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower mid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var p8 = srcimg.pixels[lr + 2] * k1[2][2]; // lower right" id="code2-l177"><span class="lineCounter-0-0-4 -codedoc-line-counter">177<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> p8 <span class="token operator">=</span> srcimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>lr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> k1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// lower right</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var r2 = p0 + p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;" id="code2-l178"><span class="lineCounter-0-0-4 -codedoc-line-counter">178<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> r2 <span class="token operator">=</span> p0 <span class="token operator">+</span> p1 <span class="token operator">+</span> p2 <span class="token operator">+</span> p3 <span class="token operator">+</span> p4 <span class="token operator">+</span> p5 <span class="token operator">+</span> p6 <span class="token operator">+</span> p7 <span class="token operator">+</span> p8<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code2-l179"><span class="lineCounter-0-0-4 -codedoc-line-counter">179<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // -1000 is the minimum value the sum could result in and 1000 is the maximum" id="code2-l180"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">180<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// -1000 is the minimum value the sum could result in and 1000 is the maximum</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultR = map(r0, -1000, 1000, 0, 255);" id="code2-l181"><span class="lineCounter-0-0-4 -codedoc-line-counter">181<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultR <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultG = map(r1, -1000, 1000, 0, 255);" id="code2-l182"><span class="lineCounter-0-0-4 -codedoc-line-counter">182<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultG <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      var resultB = map(r2, -1000, 1000, 0, 255);" id="code2-l183"><span class="lineCounter-0-0-4 -codedoc-line-counter">183<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">var</span> resultB <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // constrein 0 to 255" id="code2-l184"><span class="lineCounter-0-0-4 -codedoc-line-counter">184<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// constrein 0 to 255</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //var resultR = constrain(r0, 0, 255);" id="code2-l185"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">185<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//var resultR = constrain(r0, 0, 255);</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //var resultG = constrain(r1, 0, 255);" id="code2-l186"><span class="lineCounter-0-0-4 -codedoc-line-counter">186<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//var resultG = constrain(r1, 0, 255);</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      //var resultB = constrain(r2, 0, 255);" id="code2-l187"><span class="lineCounter-0-0-4 -codedoc-line-counter">187<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">//var resultB = constrain(r2, 0, 255);</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      // write pixels into destination image:" id="code2-l188"><span class="lineCounter-0-0-4 -codedoc-line-counter">188<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token comment">// write pixels into destination image:</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      let gray = 0.2126 * resultR + 0.7152 * resultG + 0.0722 * resultB;" id="code2-l189"><span class="lineCounter-0-0-4 -codedoc-line-counter">189<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">let</span> gray <span class="token operator">=</span> <span class="token number">0.2126</span> <span class="token operator">*</span> resultR <span class="token operator">+</span> <span class="token number">0.7152</span> <span class="token operator">*</span> resultG <span class="token operator">+</span> <span class="token number">0.0722</span> <span class="token operator">*</span> resultB<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc] = gray;" id="code2-l190"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">190<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc<span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 1] = gray;" id="code2-l191"><span class="lineCounter-0-0-4 -codedoc-line-counter">191<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 2] = gray;" id="code2-l192"><span class="lineCounter-0-0-4 -codedoc-line-counter">192<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      dstimg.pixels[mc + 3] = 255;" id="code2-l193"><span class="lineCounter-0-0-4 -codedoc-line-counter">193<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      dstimg<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>mc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code2-l194"><span class="lineCounter-0-0-4 -codedoc-line-counter">194<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code2-l195"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">195<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  // update and display the pixel buffer" id="code2-l196"><span class="lineCounter-0-0-4 -codedoc-line-counter">196<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// update and display the pixel buffer</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  dstimg.updatePixels();" id="code2-l197"><span class="lineCounter-0-0-4 -codedoc-line-counter">197<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  dstimg<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  //image(dstimg, 0, 0, dstimg.width, dstimg.height);" id="code2-l198"><span class="lineCounter-0-0-4 -codedoc-line-counter">198<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">//image(dstimg, 0, 0, dstimg.width, dstimg.height);</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}" id="code2-l199"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">199<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div><div class="tab" data-tab-title="document" data-tab-id="document" data-tab-icon="description"><blockquote><p>Se implementó una técnica de detección de bordes con una implementación de kernel convolution, esto se hace comparando los cambios bruscos en el brillo de la imagen es decir comparando el valor de cada pixel del lado derecho e izquierdo (dirección x) y del lado superior e inferior (dirección y) y usamos un kernel de 3x3 para cada dirección. estos cambios de intensidad de luz es la gradiente del borde que se pueden medir mediante la siguiente fórmula: <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi><mo>=</mo><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>G</mi><mi>x</mi><mi>G</mi><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>G</mi><mi>y</mi><mi>G</mi><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">{|G| = sqrt((GxGx) + (GyGy))}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault">G</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mord mathdefault">x</span><span class="mord mathdefault">G</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></span><br>donde Gx es el gradiente en la dirección x y Gy el gradiente en la dirección y.</p><p>El kernel de dirección x calcula los borde en posición vertical por esto lleva números negativos al lado izquierdo y positivos al derecho, así mismo el kernel en dirección y calcula   los bordes en posición horizontal y lleva número negativos arriba y positivos abajo</p></blockquote></div></div><h2 id="instance-mode" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Instance mode</h2><div class="tabs-0-0-18"><script id="bNXW_aINNF">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("bNXW_aINNF", "6jzvkXXQW/pnjrYP6mla2g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Instance Mode" data-tab-id="Instance Mode" data-tab-icon="visibility"><p>Original, negative, weighted graysacle. Clik on the image to switch it.</p><iframe id="imgInstanceMode" class="p5-0-0-17 center" style="width: 790px; height: 475px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js></script>
            <script src=/vc/docs/sketches/workshops/imaging/imgInstanceMode.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></div><div class="tab" data-tab-title="Code" data-tab-id="Code" data-tab-icon="code"><pre class="with-bar"><code class="js -codedoc-code-snippet code-0-0-3" tabindex="0"><span class="wmbar-0-0-8"><span></span><span></span><span></span><span>imgInstanceMode.js</span></span><div class="line-0-0-7  -codedoc-code-line" data-content="//var original = new p5((p)=>{" id="code3-l1"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//var original = new p5((p)=&gt;{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var original = function(p){" id="code3-l2"><span class="lineCounter-0-0-4 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> <span class="token function-variable function">original</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let img; // Declarar variable 'img'." id="code3-l3"><span class="lineCounter-0-0-4 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> img<span class="token punctuation">;</span> <span class="token comment">// Declarar variable 'img'.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgPath = &quot;/vc/docs/sketches/Pokémon.jpg&quot;;" id="code3-l4"><span class="lineCounter-0-0-4 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgPath <span class="token operator">=</span> <span class="token string">"/vc/docs/sketches/Pokémon.jpg"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgWidth = 780;" id="code3-l5"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgWidth <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgHeight = 439;" id="code3-l6"><span class="lineCounter-0-0-4 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgHeight <span class="token operator">=</span> <span class="token number">439</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l7"><span class="lineCounter-0-0-4 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.preload = () => {" id="code3-l8"><span class="lineCounter-0-0-4 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">preload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    img = p.loadImage(imgPath); // Cargar la imagen" id="code3-l9"><span class="lineCounter-0-0-4 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    img <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cargar la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  };" id="code3-l10"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l11"><span class="lineCounter-0-0-4 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.setup = () => {" id="code3-l12"><span class="lineCounter-0-0-4 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">setup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.createCanvas(imgWidth, imgHeight+15);" id="code3-l13"><span class="lineCounter-0-0-4 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">createCanvas</span><span class="token punctuation">(</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.pixelDensity(1);" id="code3-l14"><span class="lineCounter-0-0-4 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">pixelDensity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l15"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.textSize(10);" id="code3-l16"><span class="lineCounter-0-0-4 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">textSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.text('Original', 0, imgHeight+10);" id="code3-l17"><span class="lineCounter-0-0-4 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Original'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l18"><span class="lineCounter-0-0-4 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.image(img, 0, 0, imgWidth, imgHeight);" id="code3-l19"><span class="lineCounter-0-0-4 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // Only need to load the pixels[] array once, because we're only" id="code3-l20"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// Only need to load the pixels[] array once, because we're only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // manipulating pixels[] inside draw(), not drawing shapes." id="code3-l21"><span class="lineCounter-0-0-4 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// manipulating pixels[] inside draw(), not drawing shapes.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.loadPixels();" id="code3-l22"><span class="lineCounter-0-0-4 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // We must also call loadPixels() on the PImage since we are going to read its pixels." id="code3-l23"><span class="lineCounter-0-0-4 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// We must also call loadPixels() on the PImage since we are going to read its pixels.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //img.loadPixels();" id="code3-l24"><span class="lineCounter-0-0-4 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//img.loadPixels();</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let x = 0; x < img.width; x++) {" id="code3-l25"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      for (let y = 0; y < img.height; y++) {" id="code3-l26"><span class="lineCounter-0-0-4 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Calculate the 1D location from a 2D grid" id="code3-l27"><span class="lineCounter-0-0-4 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let loc = (x + y * img.width) * 4;" id="code3-l28"><span class="lineCounter-0-0-4 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> img<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Get the R,G,B values from image" id="code3-l29"><span class="lineCounter-0-0-4 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let r, g, b;" id="code3-l30"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.pixels[loc];" id="code3-l31"><span class="lineCounter-0-0-4 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.pixels[loc + 1];" id="code3-l32"><span class="lineCounter-0-0-4 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.pixels[loc + 2];" id="code3-l33"><span class="lineCounter-0-0-4 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //Constrain RGB to make sure they are within 0-255 color range" id="code3-l34"><span class="lineCounter-0-0-4 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.constrain(r, 0, 255);" id="code3-l35"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.constrain(g, 0, 255);" id="code3-l36"><span class="lineCounter-0-0-4 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.constrain(b, 0, 255);" id="code3-l37"><span class="lineCounter-0-0-4 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Make a new color and set pixel in the window" id="code3-l38"><span class="lineCounter-0-0-4 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //mathlab grises Y = R*0.3+G*0.59+B*0.11" id="code3-l39"><span class="lineCounter-0-0-4 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//mathlab grises Y = R*0.3+G*0.59+B*0.11</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let pixloc = (y * img.width + x) * 4;" id="code3-l40"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> img<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc] = r;" id="code3-l41"><span class="lineCounter-0-0-4 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 1] = g;" id="code3-l42"><span class="lineCounter-0-0-4 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 2] = b;" id="code3-l43"><span class="lineCounter-0-0-4 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 3] = 255; // Always have to set alpha transparencias" id="code3-l44"><span class="lineCounter-0-0-4 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha transparencias</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      }" id="code3-l45"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code3-l46"><span class="lineCounter-0-0-4 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.updatePixels(0,0,imgWidth, imgHeight);" id="code3-l47"><span class="lineCounter-0-0-4 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l48"><span class="lineCounter-0-0-4 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.mouseReleased = function() {" id="code3-l49"><span class="lineCounter-0-0-4 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">mouseReleased</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi.remove();" id="code3-l50"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi = new p5(negativo);    " id="code3-l51"><span class="lineCounter-0-0-4 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">p5</span><span class="token punctuation">(</span>negativo<span class="token punctuation">)</span><span class="token punctuation">;</span>    </div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l52"><span class="lineCounter-0-0-4 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}//,&quot;originalIMG&quot;);" id="code3-l53"><span class="lineCounter-0-0-4 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token comment">//,"originalIMG");</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l54"><span class="lineCounter-0-0-4 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//var negativo = new p5((p)=>{" id="code3-l55"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//var negativo = new p5((p)=&gt;{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var negativo = function(p){" id="code3-l56"><span class="lineCounter-0-0-4 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> <span class="token function-variable function">negativo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let img; // Declarar variable 'img'." id="code3-l57"><span class="lineCounter-0-0-4 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> img<span class="token punctuation">;</span> <span class="token comment">// Declarar variable 'img'.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgPath = &quot;/vc/docs/sketches/Pokémon.jpg&quot;;" id="code3-l58"><span class="lineCounter-0-0-4 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgPath <span class="token operator">=</span> <span class="token string">"/vc/docs/sketches/Pokémon.jpg"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgWidth = 780;" id="code3-l59"><span class="lineCounter-0-0-4 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgWidth <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgHeight = 439;" id="code3-l60"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgHeight <span class="token operator">=</span> <span class="token number">439</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l61"><span class="lineCounter-0-0-4 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.preload = () => {" id="code3-l62"><span class="lineCounter-0-0-4 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">preload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    img = p.loadImage(imgPath); // Cargar la imagen" id="code3-l63"><span class="lineCounter-0-0-4 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    img <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cargar la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  };" id="code3-l64"><span class="lineCounter-0-0-4 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l65"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.setup = () => {" id="code3-l66"><span class="lineCounter-0-0-4 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">setup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.createCanvas(imgWidth, imgHeight+15);" id="code3-l67"><span class="lineCounter-0-0-4 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">createCanvas</span><span class="token punctuation">(</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.pixelDensity(1);" id="code3-l68"><span class="lineCounter-0-0-4 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">pixelDensity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l69"><span class="lineCounter-0-0-4 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.textSize(10);" id="code3-l70"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">textSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.text('Negative', 0, imgHeight+10);" id="code3-l71"><span class="lineCounter-0-0-4 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Negative'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l72"><span class="lineCounter-0-0-4 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.image(img, 0, 0, imgWidth, imgHeight);" id="code3-l73"><span class="lineCounter-0-0-4 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // Only need to load the pixels[] array once, because we're only" id="code3-l74"><span class="lineCounter-0-0-4 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// Only need to load the pixels[] array once, because we're only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // manipulating pixels[] inside draw(), not drawing shapes." id="code3-l75"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// manipulating pixels[] inside draw(), not drawing shapes.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.loadPixels();" id="code3-l76"><span class="lineCounter-0-0-4 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // We must also call loadPixels() on the PImage since we are going to read its pixels." id="code3-l77"><span class="lineCounter-0-0-4 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// We must also call loadPixels() on the PImage since we are going to read its pixels.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //img.loadPixels();" id="code3-l78"><span class="lineCounter-0-0-4 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//img.loadPixels();</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let x = 0; x < img.width; x++) {" id="code3-l79"><span class="lineCounter-0-0-4 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      for (let y = 0; y < img.height; y++) {" id="code3-l80"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Calculate the 1D location from a 2D grid" id="code3-l81"><span class="lineCounter-0-0-4 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let loc = (x + y * img.width) * 4;" id="code3-l82"><span class="lineCounter-0-0-4 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> img<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Get the R,G,B values from image" id="code3-l83"><span class="lineCounter-0-0-4 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let r, g, b;" id="code3-l84"><span class="lineCounter-0-0-4 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.pixels[loc];" id="code3-l85"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.pixels[loc + 1];" id="code3-l86"><span class="lineCounter-0-0-4 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.pixels[loc + 2];" id="code3-l87"><span class="lineCounter-0-0-4 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //Constrain RGB to make sure they are within 0-255 color range" id="code3-l88"><span class="lineCounter-0-0-4 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.constrain(r, 0, 255);" id="code3-l89"><span class="lineCounter-0-0-4 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.constrain(g, 0, 255);" id="code3-l90"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.constrain(b, 0, 255);" id="code3-l91"><span class="lineCounter-0-0-4 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Make a new color and set pixel in the window" id="code3-l92"><span class="lineCounter-0-0-4 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //mathlab grises Y = R*0.3+G*0.59+B*0.11" id="code3-l93"><span class="lineCounter-0-0-4 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//mathlab grises Y = R*0.3+G*0.59+B*0.11</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let pixloc = (y * img.width + x) * 4;" id="code3-l94"><span class="lineCounter-0-0-4 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> img<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc] = 255-r;" id="code3-l95"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token operator">-</span>r<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 1] = 255-g;" id="code3-l96"><span class="lineCounter-0-0-4 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token operator">-</span>g<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 2] = 255-b;" id="code3-l97"><span class="lineCounter-0-0-4 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token operator">-</span>b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 3] = 255; // Always have to set alpha" id="code3-l98"><span class="lineCounter-0-0-4 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      }" id="code3-l99"><span class="lineCounter-0-0-4 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code3-l100"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.updatePixels(0,0,imgWidth, imgHeight);" id="code3-l101"><span class="lineCounter-0-0-4 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l102"><span class="lineCounter-0-0-4 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.mouseReleased = function() {" id="code3-l103"><span class="lineCounter-0-0-4 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">mouseReleased</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi.remove();" id="code3-l104"><span class="lineCounter-0-0-4 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi = new p5(blackAndWhite);    " id="code3-l105"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">p5</span><span class="token punctuation">(</span>blackAndWhite<span class="token punctuation">)</span><span class="token punctuation">;</span>    </div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l106"><span class="lineCounter-0-0-4 -codedoc-line-counter">106<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}//,&quot;originalIMG&quot;);" id="code3-l107"><span class="lineCounter-0-0-4 -codedoc-line-counter">107<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token comment">//,"originalIMG");</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l108"><span class="lineCounter-0-0-4 -codedoc-line-counter">108<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="//var blackAndWhite = new p5((p)=>{" id="code3-l109"><span class="lineCounter-0-0-4 -codedoc-line-counter">109<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//var blackAndWhite = new p5((p)=&gt;{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var blackAndWhite = function(p){" id="code3-l110"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">110<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> <span class="token function-variable function">blackAndWhite</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let img; // Declarar variable 'img'." id="code3-l111"><span class="lineCounter-0-0-4 -codedoc-line-counter">111<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> img<span class="token punctuation">;</span> <span class="token comment">// Declarar variable 'img'.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgPath = &quot;/vc/docs/sketches/Pokémon.jpg&quot;;" id="code3-l112"><span class="lineCounter-0-0-4 -codedoc-line-counter">112<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgPath <span class="token operator">=</span> <span class="token string">"/vc/docs/sketches/Pokémon.jpg"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgWidth = 780;" id="code3-l113"><span class="lineCounter-0-0-4 -codedoc-line-counter">113<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgWidth <span class="token operator">=</span> <span class="token number">780</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  let imgHeight = 439;" id="code3-l114"><span class="lineCounter-0-0-4 -codedoc-line-counter">114<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">let</span> imgHeight <span class="token operator">=</span> <span class="token number">439</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l115"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">115<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.preload = () => {" id="code3-l116"><span class="lineCounter-0-0-4 -codedoc-line-counter">116<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">preload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    img = p.loadImage(imgPath); // Cargar la imagen" id="code3-l117"><span class="lineCounter-0-0-4 -codedoc-line-counter">117<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    img <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cargar la imagen</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  };" id="code3-l118"><span class="lineCounter-0-0-4 -codedoc-line-counter">118<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l119"><span class="lineCounter-0-0-4 -codedoc-line-counter">119<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.setup = () => {" id="code3-l120"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">120<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">setup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.createCanvas(imgWidth, imgHeight+15);" id="code3-l121"><span class="lineCounter-0-0-4 -codedoc-line-counter">121<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">createCanvas</span><span class="token punctuation">(</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.pixelDensity(1);" id="code3-l122"><span class="lineCounter-0-0-4 -codedoc-line-counter">122<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">pixelDensity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l123"><span class="lineCounter-0-0-4 -codedoc-line-counter">123<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.textSize(10);" id="code3-l124"><span class="lineCounter-0-0-4 -codedoc-line-counter">124<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">textSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.text('Gray scale', 0, imgHeight+10);" id="code3-l125"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">125<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Gray scale'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgHeight<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l126"><span class="lineCounter-0-0-4 -codedoc-line-counter">126<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.image(img, 0, 0, imgWidth, imgHeight);" id="code3-l127"><span class="lineCounter-0-0-4 -codedoc-line-counter">127<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // Only need to load the pixels[] array once, because we're only" id="code3-l128"><span class="lineCounter-0-0-4 -codedoc-line-counter">128<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// Only need to load the pixels[] array once, because we're only</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // manipulating pixels[] inside draw(), not drawing shapes." id="code3-l129"><span class="lineCounter-0-0-4 -codedoc-line-counter">129<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// manipulating pixels[] inside draw(), not drawing shapes.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.loadPixels();" id="code3-l130"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">130<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">loadPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    // We must also call loadPixels() on the PImage since we are going to read its pixels." id="code3-l131"><span class="lineCounter-0-0-4 -codedoc-line-counter">131<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">// We must also call loadPixels() on the PImage since we are going to read its pixels.</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    //img.loadPixels();" id="code3-l132"><span class="lineCounter-0-0-4 -codedoc-line-counter">132<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//img.loadPixels();</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    for (let x = 0; x < img.width; x++) {" id="code3-l133"><span class="lineCounter-0-0-4 -codedoc-line-counter">133<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      for (let y = 0; y < img.height; y++) {" id="code3-l134"><span class="lineCounter-0-0-4 -codedoc-line-counter">134<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Calculate the 1D location from a 2D grid" id="code3-l135"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">135<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Calculate the 1D location from a 2D grid</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let loc = (x + y * img.width) * 4;" id="code3-l136"><span class="lineCounter-0-0-4 -codedoc-line-counter">136<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">*</span> img<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Get the R,G,B values from image" id="code3-l137"><span class="lineCounter-0-0-4 -codedoc-line-counter">137<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Get the R,G,B values from image</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let r, g, b;" id="code3-l138"><span class="lineCounter-0-0-4 -codedoc-line-counter">138<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.pixels[loc];" id="code3-l139"><span class="lineCounter-0-0-4 -codedoc-line-counter">139<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.pixels[loc + 1];" id="code3-l140"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">140<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.pixels[loc + 2];" id="code3-l141"><span class="lineCounter-0-0-4 -codedoc-line-counter">141<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>loc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //Constrain RGB to make sure they are within 0-255 color range" id="code3-l142"><span class="lineCounter-0-0-4 -codedoc-line-counter">142<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//Constrain RGB to make sure they are within 0-255 color range</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        r = p.constrain(r, 0, 255);" id="code3-l143"><span class="lineCounter-0-0-4 -codedoc-line-counter">143<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        r <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        g = p.constrain(g, 0, 255);" id="code3-l144"><span class="lineCounter-0-0-4 -codedoc-line-counter">144<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        g <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        b = p.constrain(b, 0, 255);" id="code3-l145"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">145<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        b <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        // Make a new color and set pixel in the window" id="code3-l146"><span class="lineCounter-0-0-4 -codedoc-line-counter">146<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// Make a new color and set pixel in the window</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        //mathlab grises Y = R*0.3+G*0.59+B*0.11" id="code3-l147"><span class="lineCounter-0-0-4 -codedoc-line-counter">147<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//mathlab grises Y = R*0.3+G*0.59+B*0.11</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let pixloc = (y * img.width + x) * 4;" id="code3-l148"><span class="lineCounter-0-0-4 -codedoc-line-counter">148<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> pixloc <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> img<span class="token punctuation">.</span>width <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        let gray = r*0.299+g*0.587+b*0.114;" id="code3-l149"><span class="lineCounter-0-0-4 -codedoc-line-counter">149<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">let</span> gray <span class="token operator">=</span> r<span class="token operator">*</span><span class="token number">0.299</span><span class="token operator">+</span>g<span class="token operator">*</span><span class="token number">0.587</span><span class="token operator">+</span>b<span class="token operator">*</span><span class="token number">0.114</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc] = gray;" id="code3-l150"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">150<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc<span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 1] = gray;" id="code3-l151"><span class="lineCounter-0-0-4 -codedoc-line-counter">151<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 2] = gray;" id="code3-l152"><span class="lineCounter-0-0-4 -codedoc-line-counter">152<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> gray<span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="        p.pixels[pixloc + 3] = 255; // Always have to set alpha" id="code3-l153"><span class="lineCounter-0-0-4 -codedoc-line-counter">153<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        p<span class="token punctuation">.</span>pixels<span class="token punctuation">[</span>pixloc <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// Always have to set alpha</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="      }" id="code3-l154"><span class="lineCounter-0-0-4 -codedoc-line-counter">154<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    }" id="code3-l155"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">155<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    p.updatePixels(0,0,imgWidth, imgHeight);" id="code3-l156"><span class="lineCounter-0-0-4 -codedoc-line-counter">156<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    p<span class="token punctuation">.</span><span class="token function">updatePixels</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>imgWidth<span class="token punctuation">,</span> imgHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l157"><span class="lineCounter-0-0-4 -codedoc-line-counter">157<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  p.mouseReleased = function() {" id="code3-l158"><span class="lineCounter-0-0-4 -codedoc-line-counter">158<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  p<span class="token punctuation">.</span><span class="token function-variable function">mouseReleased</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi.remove();" id="code3-l159"><span class="lineCounter-0-0-4 -codedoc-line-counter">159<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="    switchi = new p5(original);    " id="code3-l160"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">160<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    switchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">p5</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span>    </div><br><div class="line-0-0-7  -codedoc-code-line" data-content="  }" id="code3-l161"><span class="lineCounter-0-0-4 -codedoc-line-counter">161<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="}//,&quot;originalIMG&quot;);" id="code3-l162"><span class="lineCounter-0-0-4 -codedoc-line-counter">162<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span><span class="token comment">//,"originalIMG");</span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="" id="code3-l163"><span class="lineCounter-0-0-4 -codedoc-line-counter">163<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-7  -codedoc-code-line" data-content="var switchi = new p5(original);" id="code3-l164"><span class="lineCounter-0-0-4 prim -codedoc-line-counter">164<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">var</span> switchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">p5</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre></div></div><script id="BosVGIrFUd">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("BosVGIrFUd", "7H5M9Vp+I8cVV99ELLvnzg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="contentnav-0-0-16" data-no-search=""><a href="#grayscales" class="h2" data-content-highlight="grayscales">Grayscales</a><a href="#kernel-mask" class="h2" data-content-highlight="kernel-mask">Kernel Mask</a><a href="#instance-mode" class="h2" data-content-highlight="instance-mode">Instance mode</a></div></div><div id="-codedoc-toc" class="toc-0-0-13"><div class="content-0-0-14"><p><a href="/vc/">Home</a></p><div class="collapse-0-0-9 "><script id="btBNRHkHKz">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("btBNRHkHKz", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Workshops</span><span class="icon-font closed">chevron_right</span></div><div class="content"><div class="collapse-0-0-9 "><script id="LPhziuqNVz">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("LPhziuqNVz", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Workshop 1</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/workshop1/imgLumaKernel">Image Luma &amp; Kernel</a>
<a href="/vc/docs/workshops/workshop1/vidLumaKernel">Video Luma &amp; Kernel</a>
<a href="/vc/docs/workshops/workshop1/photoMosaic">Photographic mosaic</a>
<a href="/vc/docs/workshops/workshop1/asciiArt">Ascii art</a></p></div></div><div class="collapse-0-0-9 "><script id="FJihcFMjMf">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("FJihcFMjMf", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Workshop 2</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/workshop2/lumi">Global Illumination</a>
<a href="/vc/docs/workshops/workshop2/hardwareGray">Hardware Weighted Gray</a>
<a href="/vc/docs/workshops/workshop2/asciiart">Ascii Art (Shaders)</a>
<a href="/vc/docs/workshops/workshop2/photomosaic">Photomosaic (Shaders)</a>
<a href="/vc/docs/workshops/workshop2/Conclusions">Conclusions</a></p></div></div></div></div><div class="collapse-0-0-9 "><script id="fArOMZDtFv">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("fArOMZDtFv", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">P5 Code Snippets</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/snippets/component">P5 Component</a>
<a href="/vc/docs/snippets/basic">Basics</a>
<a href="/vc/docs/snippets/video-dom">Video on dom</a>
<a href="/vc/docs/snippets/video-canvas">Video on canvas</a>
<a href="/vc/docs/snippets/3d">3D</a>
<a href="/vc/docs/snippets/lib">Libs</a>
<a href="/vc/docs/snippets/sound">Sound</a></p></div></div><div class="collapse-0-0-9 "><script id="owxXvlOxYP">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("owxXvlOxYP", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Team</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/members/Sebastian-Castaneda">Sebastian Castañeda</a>
<a href="/vc/docs/members/Camilo-Florez">Camilo Florez</a>
<a href="/vc/docs/members/Marcel-Martinez">Marcel Martinez</a>
<a href="/vc/docs/members/Luis-Sandoval">Luis Sandoval</a></p></div></div></div><div class="search-0-0-15"><script id="AUmHQDPAWk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("AUmHQDPAWk", "MChpnTvN8BpuKyiMGzmSYw==", {"repo":"vc","user":"CompuVisual2021","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><div class="footer-0-0-12"><div class="left"><script id="ZtTaoiPADk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ZtTaoiPADk", "X5W7He+ge/Kg3B6xB+T5gg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"><a href="https://github.com/CompuVisual2021/vc/" target="_blank">GitHub</a></div></div><div class="right"><script id="JdoZssgXXK">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("JdoZssgXXK", "3ehN2Qj7wHC4donAKEDe0Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="pnExymcT_d">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pnExymcT_d", "bIAidu6MCPVPBcGGWLCR6Q==", {"namespace":"/vc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>